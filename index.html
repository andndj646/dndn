<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ Community Search</title>
  <style>
    :root {
      --bg: #ffffff; --text: #1a202c; --muted: #718096;
      --card: #f8fafc; --border: #e2e8f0; --primary: #4299e1;
      --success: #48bb78; --warning: #ed8936; --danger: #e53e3e;
      --i2p: #8b5cf6;
      --shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #121212; --text: #e2e8f0; --muted: #a0aec0;
        --card: #1e1e1e; --border: #2d3748; --shadow: 0 4px 12px rgba(0,0,0,0.2);
      }
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
      background: var(--bg); color: var(--text); line-height:1.6;
      padding: 16px; max-width: 800px; margin: 0 auto;
    }
    header { text-align:center; margin:24px 0; }
    h1 { font-size:2rem; margin-bottom:8px; 
         background:linear-gradient(90deg, var(--primary), #805ad5);
         -webkit-background-clip:text; background-clip:text; color:transparent; }
    .subtitle { color:var(--muted); margin:8px 0 16px; }
    
    .lang-switch {
      position: absolute; top: 16px; right: 16px;
      background: var(--card); border: 1px solid var(--border);
      border-radius: 20px; padding: 4px 8px; font-size: 0.9rem;
    }
    .lang-btn { background: none; border: none; color: var(--muted); cursor: pointer; }
    .lang-btn.active { color: var(--primary); font-weight: bold; }
    
    .search-box {
      position:sticky; top:0; background:var(--bg); padding:12px 0;
      margin:-16px -16px 16px; backdrop-filter:blur(10px); z-index:10;
    }
    #q { width:100%; padding:14px; font-size:1rem; border:1px solid var(--border);
         border-radius:50px; background:var(--card); color:var(--text); outline:none; }
    
    .site {
      background:var(--card); border:1px solid var(--border); border-radius:16px;
      padding:16px; margin-bottom:16px; box-shadow:var(--shadow);
      position: relative;
    }
    .i2p-badge {
      position: absolute; top: 12px; right: 12px;
      background: var(--i2p); color: white; font-size: 0.7rem;
      padding: 2px 6px; border-radius: 10px; font-weight: bold;
    }
    .site h3 { margin-bottom:8px; }
    .site a { color: var(--primary); text-decoration:none; font-weight:600; }
    .tags { margin:10px 0; }
    .tag { display:inline-block; background:rgba(66,153,225,0.15); color:var(--primary);
           padding:4px 10px; border-radius:20px; font-size:0.85rem; margin-right:6px; }
    .url { color:var(--muted); font-size:0.85rem; word-break:break-all; }
    
    .rating {
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .stars {
      color: #fbbf24;
      font-size: 1.2rem;
    }
    .user-rating {
      margin-left: 12px;
      font-size: 0.9rem;
      color: var(--primary);
    }
    
    .submit-btn {
      display: inline-block; background: var(--primary); color: white;
      padding: 8px 20px; border-radius: 24px; text-decoration: none;
      font-weight: 600; margin: 16px 0; transition: opacity 0.2s;
    }
    .submit-btn:hover { opacity: 0.9; }
    
    .empty { text-align:center; padding:40px 0; color:var(--muted); }
    footer { text-align:center; margin-top:32px; padding-top:16px; 
             border-top:1px solid var(--border); color:var(--muted); font-size:0.85rem; }
    
    @media (max-width:600px) {
      body { padding:12px; }
      h1 { font-size:1.6rem; }
      .site { padding:14px; }
    }
  </style>
</head>
<body>
  <div class="lang-switch">
    <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
    <button class="lang-btn" data-lang="en">English</button>
  </div>

  <header>
    <h1 id="title">Community Search</h1>
    <p class="subtitle" id="subtitle">Search â€¢ Rate â€¢ Submit</p>
    <a href="submit.html" class="submit-btn" id="addBtn">â• Add a Website</a>
  </header>

  <div class="search-box">
    <input type="text" id="q" placeholder="Search by name, tag or description..." autofocus />
  </div>

  <div id="status">Loading...</div>
  <div id="results"></div>

  <footer>
    <p>â­ Rate websites â€¢ ğŸŒ Includes .i2p sites</p>
    <p>Data updated manually via GitHub</p>
  </footer>

  <script>
    // ========== å¤šè¯­è¨€ ==========
    const translations = {
      en: {
        title: "Community Search",
        subtitle: "Search â€¢ Rate â€¢ Submit",
        addBtn: "â• Add a Website",
        searchPlaceholder: "Search by name, tag or description...",
        loading: "Loading...",
        noData: "No data.",
        noResults: "No results found.",
        yourRating: "Your rating: {stars} â˜…"
      },
      zh: {
        title: "ç¤¾åŒºæœç´¢å¼•æ“",
        subtitle: "æœç´¢ â€¢ è¯„åˆ† â€¢ æäº¤",
        addBtn: "â• æ·»åŠ ç½‘ç«™",
        searchPlaceholder: "æŒ‰åç§°ã€æ ‡ç­¾æˆ–æè¿°æœç´¢...",
        loading: "åŠ è½½ä¸­...",
        noData: "æ— æ•°æ®ã€‚",
        noResults
